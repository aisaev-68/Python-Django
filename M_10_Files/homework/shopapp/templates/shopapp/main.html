{% extends "shopapp/base.html" %}
{% load static %}

{% block title %}
Главная страница
{% endblock %}


{% block section %}
<h3 class="title_login">Добро пожаловать на сайт</h3>

<div class="row no-gutters row-eq-height">
    {% for product in products %}
    <div class="card-deck col-lg-3 col-md-3 col-sm-4 col-xs-12 d-flex" style="margin-right: 1vw;">

        <div class="card mb-3 bg-white border-primary border rounded d-flex flex-column">
            {% if 'http' in product.image.url %}
            <img src="{{ product.image }}"
                 style="height: 20vh; object-fit: contain; border-top-left-radius: 15px; border-top-right-radius: 15px;"
                 class="card-img-top mt-4"
                 alt="Laptop"/>
            {% else %}
            <img src="{{ product.image.url }}"
                 style="height: 20vh; object-fit: contain; border-top-left-radius: 15px; border-top-right-radius: 15px;"
                 class="card-img-top mt-4"
                 alt="Laptop"/>
            {% endif %}

            <div class="card-body">
                <div class="card-body">

                    <div class="rating-star mb-3">
                        <span title="{% firstof product.rating '0' %}/5">
                            <i class="fa fa-star{% if product.rating < 0.5%}-o{% elif product.rating >= 0.5 and product.rating < 1 %}-half-o{% endif %}"
                               aria-hidden="true" style="color: #f39c12;"></i>
                            <i class="fa fa-star{% if product.rating < 1.5%}-o{% elif product.rating >= 1.5 and product.rating < 2 %}-half-o{% endif %}"
                               aria-hidden="true" style="color: #f39c12;"></i>
                            <i class="fa fa-star{% if product.rating < 2.5%}-o{% elif product.rating >= 2.5 and product.rating < 3 %}-half-o{% endif %}"
                               aria-hidden="true" style="color: #f39c12;"></i>
                            <i class="fa fa-star{% if product.rating < 3.5%}-o{% elif product.rating >= 3.5 and product.rating < 4 %}-half-o{% endif %}"
                               aria-hidden="true" style="color: #f39c12;"></i>
                            <i class="fa fa-star{% if product.rating < 4.5%}-o{% elif product.rating >= 4.5 and product.rating < 5 %}-half-o{% endif %}"
                               aria-hidden="true" style="color: #f39c12;"></i>
                        </span>
                        <span><strong>( {{ product.rating }}/5 )</strong></span>
                    </div>
                    <p class="card-title mb-3" style="height: 5vw;">
                        <a class=card-link" href="{% url 'shopapp:product_detail' pk=product.pk %}">
                            {{ product.name|title }}
                        </a>
                    </p>
                    <p class="card-text mb-2"><b>{{ product.price }} ₽</b></p>
                </div>

                <div class="card-body ">
                    <form class="register-form d-flex justify-content-between" method="post" action="">
                        <input type="number" class="form-control mx-0" style="width: 5vw;"/>
                        <input class="btn-primary" type="submit" value="Купить" style="width: 8vw;"/>
                    </form>
                </div>


            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}